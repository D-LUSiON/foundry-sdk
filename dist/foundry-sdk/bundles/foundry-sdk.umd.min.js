!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core")):"function"==typeof define&&define.amd?define("foundry-sdk",["exports","@angular/core"],t):t((e=e||self)["foundry-sdk"]={},e.ng.core)}(this,function(e,t){"use strict";var r=function(){function e(){this.emitter=new t.EventEmitter}return e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[]},e.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),o=function(){function e(e,t,r){var o=this;this._el=e,this._renderer=t,this._resizeService=r,this.theme="",this.overflow_x="clip",this.overflow_y="clip",this.min_height="0",this.max_height="auto",this.direction="column",this.resizers=[],this.resizer_width=6,this.host_min_height=this.min_height,this.host_max_height=this.max_height,this.host_overfow_x=this.overflow_x,this.host_overfow_y=this.overflow_y,this.host_flex_direction=this.direction,this.host_color_theme=this.theme,this.all_resizers={},this._resizeService.emitter.subscribe(function(e){e.zone!==o.role&&o.resizers.forEach(function(e){o._updateResizerPosition(o.all_resizers[e])})})}return e.prototype.onMouseEnter=function(e){var t=this;Object.keys(this.all_resizers).forEach(function(e){t._renderer.removeClass(t.all_resizers[e],"resizer-handle-hidden"),t._renderer.addClass(t.all_resizers[e],"resizer-handle-visible")})},e.prototype.onMouseLeave=function(e){var t=this;e.relatedTarget&&e.relatedTarget.getAttribute("zone")===this.role||Object.keys(this.all_resizers).forEach(function(e){t._renderer.removeClass(t.all_resizers[e],"resizer-handle-visible"),t._renderer.addClass(t.all_resizers[e],"resizer-handle-hidden")})},e.prototype.ngOnInit=function(){var e=this;this._renderer.setStyle(this._el.nativeElement,"grid-area",this.role),this.border&&this._renderer.setStyle(this._el.nativeElement,"border-"+this.border+"-width","1px"),this.resizers.forEach(function(t){if(e.all_resizers[t])console.error("You've defined more than one \""+t+'" resizers!');else{var r=e._renderer.createElement("div");switch(e._renderer.setAttribute(r,"zone",e.role),e._renderer.setAttribute(r,"role",t),e._renderer.addClass(r,"resizer-handle"),e._renderer.addClass(r,"resizer-handle-hidden"),t){case"top":case"bottom":e._renderer.setStyle(r,"cursor","n-resize");break;case"right":case"left":e._renderer.setStyle(r,"cursor","e-resize")}e._updateResizerPosition(r),e._addMouseDragListeners(r,t),e._renderer.appendChild(document.querySelector("body"),r),e.all_resizers[t]=r}})},e.prototype.ngOnChanges=function(e){this.host_color_theme=this.theme,this.host_min_height=this.min_height,this.host_max_height=this.max_height,this.host_overfow_x=this.overflow_x,this.host_overfow_y=this.overflow_y,this.host_flex_direction=this.direction},e.prototype.ngAfterViewInit=function(){this.host_color_theme=this.theme,this.host_min_height=this.min_height,this.host_max_height=this.max_height,this.host_overfow_x=this.overflow_x,this.host_overfow_y=this.overflow_y,this.host_flex_direction=this.direction},e.prototype._updateResizerPosition=function(e){var t=this._el.nativeElement.getBoundingClientRect();switch(e.getAttribute("role")){case"top":this._renderer.setStyle(e,"width",t.width+"px"),this._renderer.setStyle(e,"height",this.resizer_width+"px"),this._renderer.setStyle(e,"top",t.y-this.resizer_width/2+"px"),this._renderer.setStyle(e,"left",t.x+"px");break;case"right":this._renderer.setStyle(e,"width",this.resizer_width+"px"),this._renderer.setStyle(e,"height",t.height+"px"),this._renderer.setStyle(e,"top",t.top+"px"),this._renderer.setStyle(e,"left",t.width+t.left-this.resizer_width+this.resizer_width/2+"px");break;case"bottom":this._renderer.setStyle(e,"width",t.width+"px"),this._renderer.setStyle(e,"height",this.resizer_width+"px"),this._renderer.setStyle(e,"top",t.bottom-this.resizer_width+this.resizer_width/2+"px"),this._renderer.setStyle(e,"left",t.x+"px");break;case"left":this._renderer.setStyle(e,"width",this.resizer_width+"px"),this._renderer.setStyle(e,"height",t.height+"px"),this._renderer.setStyle(e,"top",t.top+"px"),this._renderer.setStyle(e,"left",t.left-this.resizer_width/2+"px")}},e.prototype._addMouseDragListeners=function(e,t){var r=this;this._renderer.listen(e,"mouseenter",function(t){r._renderer.removeClass(e,"resizer-handle-hidden"),r._renderer.addClass(e,"resizer-handle-visible")}),this._renderer.listen(e,"mouseleave",function(t){t.relatedTarget&&t.relatedTarget.getAttribute("role")===r.role||(r._renderer.removeClass(e,"resizer-handle-visible"),r._renderer.addClass(e,"resizer-handle-hidden"))}),this._renderer.listen(e,"mousedown",function(o){r._renderer.setStyle(document.querySelector("body"),"user-select","none");var i=r._renderer.listen(window,"mousemove",function(o){["top","bottom"].includes(t)?r._renderer.setStyle(e,"top",o.pageY+"px"):r._renderer.setStyle(e,"left",o.pageX+"px"),r._resizeService.emitter.emit({zone:r.role,resize:["top","bottom"].includes(t)?"v":"h",handle:t,handle_width:r.resizer_width,event:o,element_position:r._el.nativeElement.getBoundingClientRect(),resizer_width:r.resizer_width})}),s=r._renderer.listen(window,"dragstart",function(e){return e.preventDefault(),e.stopPropagation(),!1}),n=r._renderer.listen(window,"mouseup",function(e){r._renderer.setStyle(document.querySelector("body"),"user-select","unset"),i(),s(),n()})})},e.decorators=[{type:t.Component,args:[{selector:"fnd-workspace-zone",template:"<ng-content></ng-content>",styles:["::ng-deep .resizer-handle{position:absolute;z-index:10000;background-color:var(--zone-handle-bg-color);border-width:var(--zone-handle-border-width);border-style:var(--zone-handle-border-style);border-color:var(--zone-handle-border-color)}::ng-deep .resizer-handle-visible{visibility:visible;opacity:1;-webkit-transition:opacity .1s linear;transition:opacity .1s linear}::ng-deep .resizer-handle-hidden{visibility:hidden;opacity:0;-webkit-transition:visibility .5s 1s,opacity 1s linear;transition:visibility .5s 1s,opacity 1s linear}:host-context(fnd-workspace-zone){--scrollbar-color:var(--color-tint);--scrollbar-thumb-color:var(--color-shade);--scrollbar-thumb-hover-color:var(--color-shade-lighter);--scrollbar-thumb-active-color:var(--color-shade-darker);--wrapper-bg-color:var(--color);--wrapper-text-color:var(--color-contrast);--zone-bg-color:var(--color);--zone-text-color:var(--color-contrast);--zone-border-color:var(--color-shade);--zone-border-style:solid;--zone-handle-bg-color:var(--color-shade);--zone-handle-color:var(--color-dark-contrast);--zone-handle-border-width:1px;--zone-handle-border-color:var(--color-shade);display:-webkit-box;display:flex;overflow:auto;word-break:break-all;background-color:var(--zone-bg-color);color:var(--zone-text-color);border-width:0;border-style:var(--zone-border-style);border-color:var(--zone-border-color)}"]}]}],e.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer2},{type:r}]},e.propDecorators={role:[{type:t.Input}],border:[{type:t.Input}],resize_zone:[{type:t.Input}],theme:[{type:t.Input}],overflow_x:[{type:t.Input}],overflow_y:[{type:t.Input}],min_height:[{type:t.Input}],max_height:[{type:t.Input}],direction:[{type:t.Input}],resizers:[{type:t.Input}],resizer_width:[{type:t.Input}],host_min_height:[{type:t.HostBinding,args:["style.min-height"]}],host_max_height:[{type:t.HostBinding,args:["style.max-height"]}],host_overfow_x:[{type:t.HostBinding,args:["style.overflow-x"]}],host_overfow_y:[{type:t.HostBinding,args:["style.overflow-y"]}],host_flex_direction:[{type:t.HostBinding,args:["style.flex-direction"]}],host_color_theme:[{type:t.HostBinding,args:["attr.colorTheme"]}],onMouseEnter:[{type:t.HostListener,args:["mouseenter",["$event"]]}],onMouseLeave:[{type:t.HostListener,args:["mouseleave",["$event"]]}]},e}(),i=function(){function e(e,t,r){var o=this;this._el=e,this._renderer=t,this._resizeService=r,this.rows=[],this.columns=[],this.areas=[],this.padding="",this.theme="light",this.restore_state=!0,this._rows_initial=[],this._cols_initial=[],this.host_theme_class="workspace-theme-"+this.theme,this._resizeService.emitter.subscribe(function(e){if("h"===e.resize){var t=-1;o.areas.forEach(function(r){-1===t&&(t=r.findIndex(function(t){return t===e.zone}))}),"right"===e.handle?o.columns[t]=e.event.pageX-e.element_position.left+e.handle_width+"px":"left"===e.handle&&(o.columns[t]=window.outerWidth-e.event.pageX+"px"),o._setAreasStyle()}else if("v"===e.resize){var r=-1;o.areas.forEach(function(t,o){t.includes(e.zone)&&(r=o)}),"top"===e.handle?o.rows[r]=e.element_position.bottom-e.event.pageY+"px":"bottom"===e.handle&&(o.rows[r]=e.event.pageY+e.handle_width+"px"),o._setAreasStyle()}})}return e.prototype.ngOnInit=function(){this.restore_state&&(this._rows_initial=this.rows,this._cols_initial=this.columns,localStorage.getItem("wrapper:rows")&&(this.rows=JSON.parse(localStorage.getItem("wrapper:rows"))),localStorage.getItem("wrapper:columns")&&(this.columns=JSON.parse(localStorage.getItem("wrapper:columns")))),this._setAreasStyle(),this._renderer.addClass(document.querySelector("body"),"workspace-theme-"+this.theme),this._renderer.setAttribute(document.querySelector("body"),"colorTheme",this.theme)},e.prototype.ngOnChanges=function(e){this.host_theme_class="workspace-theme-"+this.theme,this._renderer.addClass(document.querySelector("body"),"workspace-theme-"+this.theme),this._renderer.setAttribute(document.querySelector("body"),"colorTheme",this.theme),this.restore_state&&(this._rows_initial=this.rows,this._cols_initial=this.columns,localStorage.getItem("wrapper:rows")&&(this.rows=JSON.parse(localStorage.getItem("wrapper:rows"))),localStorage.getItem("wrapper:columns")&&(this.columns=JSON.parse(localStorage.getItem("wrapper:columns")))),this._setAreasStyle()},e.prototype._setAreasStyle=function(){this._renderer.setStyle(this._el.nativeElement,"grid-template-rows",this.rows.join(" ")),this._renderer.setStyle(this._el.nativeElement,"grid-template-columns",this.columns.join(" ")),this._renderer.setStyle(this._el.nativeElement,"grid-template-areas",this.areas.map(function(e){return'"'+e.join(" ")+'"'}).join(" ")),this.restore_state&&(localStorage.setItem("wrapper:rows",JSON.stringify(this.rows)),localStorage.setItem("wrapper:columns",JSON.stringify(this.columns)))},e.decorators=[{type:t.Component,args:[{selector:"fnd-workspace-wrapper",template:"<ng-content></ng-content>",styles:["::ng-deep body{margin:0;padding:0;box-sizing:border-box}:host-context(fnd-workspace-wrapper){position:fixed;display:-ms-grid;display:grid;width:100%;height:100%;background-color:var(--wrapper-bg-color);color:var(--wrapper-text-color)}"]}]}],e.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer2},{type:r}]},e.propDecorators={rows:[{type:t.Input}],columns:[{type:t.Input}],areas:[{type:t.Input}],padding:[{type:t.Input}],theme:[{type:t.Input}],restore_state:[{type:t.Input}],host_theme_class:[{type:t.HostBinding,args:["class"]}]},e}(),s=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{declarations:[o,i],imports:[],exports:[o,i]}]}],e}(),n=function(){return function e(t){t&&(t.hasOwnProperty("title")&&(this.title=t.title),t.hasOwnProperty("icon")&&(this.icon=t.icon),t.hasOwnProperty("action")&&(this.action=t.action),t.hasOwnProperty("role")&&(this.role=t.role),t.hasOwnProperty("children")&&(this.children=t.children.map(function(t){return new e(t)})))}}();e.FoundrySdkModule=s,e.NavigationElement=n,e.ɵa=o,e.ɵb=r,e.ɵc=i,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=foundry-sdk.umd.min.js.map